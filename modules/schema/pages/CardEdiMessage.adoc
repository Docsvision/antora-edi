= Схема карточки "Карточка обмена сообщениями"

* Идентификатор: F2C0CE31-F629-49DF-9BCB-89BC07C60CA5
* Псевдоним: CardEdiMessage
* Название: Карточка обмена сообщениями

== Секции карточки

*Секция "Основная информация"*

* Идентификатор: C03530CF-F7A1-4BE5-AD5E-8328FDB9D614
* Псевдоним: MainInfo
* Название: Основная информация
* Тип секции: struct

.Поля секции "Основная информация"
[cols="20%,20%,20%,20%,20%",options="header"]
|===
|Псевдоним |Название |Тип поля |Размер |Дополнительная информация
|CardId |Карточка |refcardid | |
|MessageState |Состояние |enum | |**Значения:**Создаётся = 0, Получен на подпись от контрагента = 1, Отправлен на подпись контрагенту = 2, Получен отказ от контрагента = 3, Получена подпись от контрагента = 4, Ошибка = 5, Готово к отправке = 6, Отправлена ответная подпись контрагенту = 7, Требуется подтверждение получения = 8, Отправлено извещение о получении = 9, Требуется уточнение = 10, Получен запрос на аннулирование = 11, Отправлен запрос на аннулирование = 12, Аннулирован = 13, Получен от контрагента = 14, Отправлен отказ от подписи контрагенту = 15, Отправлен запрос на уточнение = 16
|Partner |Контрагент |refid | |
|OrganizationBox |Ящик организации |refid | |
|OrganizationDepartment |Подразделение организации |refid | |
|PartnerBox |Ящик контрагента |refid | |
|PartnerDepartment |Подразделение контрагента |refid | |
|OperatorMessageId |Идентификатор сообщения у оператора |unistring |1024 |
|DocumentType |Тип документа |unistring |1024 |
|DocumentVersion |Версия документа |unistring |1024 |
|IncomingMessage |Входящее сообщение |bool | |
|===

*Секция "Файлы"*

* Идентификатор: 7D729392-7A2A-47A8-8865-14521CB2B99D
* Псевдоним: Files
* Название: Файлы
* Тип секции: coll

.Поля секции "Файлы"
[cols="20%,20%,20%,20%,20%",options="header"]
|===
|Псевдоним |Название |Тип поля |Размер |Дополнительная информация
|FileId |Файл |uniqueid | |
|FileName |Имя файла |unistring |1024 |
|FileType |Тип файла |enum | |**Значения:**Неформализованный основной = 0, Неформализованный дополнительный = 1
|SignatureId |Подпись |uniqueid | |
|OperatorFileId |Идентификатор файла у оператора |unistring |1024 |
|OperatorSignatureId |Идентификатор подписи у оператора |unistring |1024 |
|FileState |Состояние файла |enum | |**Значения:**Создаётся = 0, Получен на подпись от контрагента = 1, Отправлен на подпись контрагенту = 2, Получен отказ от контрагента = 3, Получена подпись от контрагента = 4, Ошибка = 5, Отправлена ответная подпись контрагенту = 6, Отправлен отказ от подписи контрагенту = 7, Получен запрос на аннулирование = 8, Отправлен запрос на аннулирование = 9, Аннулирован = 10, Получен от контрагента = 11
|RejectionComment |Комментарий при отказе от подписи |refid | |
|ReplySignatureId |Ответная подпись |uniqueid | |
|ContentType |Тип содержимого |enum | |**Значения:**Не формализованный = 0, УПД продавца = 1
|RevRejectionFile |Комментарий при отказе от аннулирования |refid | |
|RevReplySignatureId |Ответная подпись об аннулировании |uniqueid | |
|===

*Подчиненные секции*

*Секция "Ответные файлы"*

* Идентификатор: 3BA8BF11-9A51-4537-9E91-A90F62C4288E
* Псевдоним: ReplyFiles
* Название: Ответные файлы
* Тип секции: coll

.Поля секции "Ответные файлы"
[cols="20%,20%,20%,20%,20%",options="header"]
|===
|Псевдоним |Название |Тип поля |Размер |Дополнительная информация
|ReplyFile |Ответный файл |refid | |
|ReplyFileType |Тип ответного файла |enum | |**Значения:**Подтверждение получения = 0, Извещение о получении = 1, Ответный титул = 2, Отказ от подписи = 3, Запрос на уточнение = 4, Запрос на аннулирование = 5, Ответная подпись аннулирования = 6, Отказ от аннулирования = 7
|NeedReceipt |Требуется извещение |bool | |
|ReplyReceipt |Ответная квитанция |refid | |
|===

*Секция "Журнал обмена"*

* Идентификатор: 7242BC7E-1C4A-4EE0-9B18-D6A922406376
* Псевдоним: Log
* Название: Журнал обмена
* Тип секции: coll

.Поля секции "Журнал обмена"
[cols="20%,20%,20%,20%,20%",options="header"]
|===
|Псевдоним |Название |Тип поля |Размер |Дополнительная информация
|EventType |Тип события |enum | |**Значения:**Информация = 0, Ошибка = 1, Ответ = 2, Из {dv} = 3, От контрагента = 4, От оператора обмена = 5
|Date |Дата |datetime | |
|Description |Описание |unitext | |
|Comment |Комментарий |unitext | |
|FileName |Имя файла |unistring |1024 |
|SignedFile |Подписанный файл |refid | |
|===

*Секция "Подписанные комментарии"*

* Идентификатор: BFD0947B-ECCE-4C6C-B777-0AF149D9CDA8
* Псевдоним: SignedComments
* Название: Подписанные комментарии
* Тип секции: coll

.Поля секции "Подписанные комментарии"
[cols="20%,20%,20%,20%,20%",options="header"]
|===
|Псевдоним |Название |Тип поля |Размер |Дополнительная информация
|Comment |Комментарий |unitext | |
|SignatureId |Подпись |uniqueid | |
|===

*Секция "Подписанные файлы"*

* Идентификатор: 4A8B3515-6E35-4FC7-89D4-9898021C074E
* Псевдоним: SignedFiles
* Название: Подписанные файлы
* Тип секции: coll

.Поля секции "Подписанные файлы"
[cols="20%,20%,20%,20%,20%",options="header"]
|===
|Псевдоним |Название |Тип поля |Размер |Дополнительная информация
|FileId |Файл |refcardid |
a|**Идентификатор типа:**6E39AD2B-E930-4D20-AAFA-C2ECF812C2B3

**Идентификатор секции:**2FDE03C2-FF87-4E42-A8C2-7CED181977FB

|FileName |Имя файла |unistring |1024 |
|SignatureId |Подпись |uniqueid | |
|OperatorFileId |Идентификатор файла у оператора |unistring |1024 |
|OperatorSignatureId |Идентификатор подписи у оператора |unistring |1024 |
|SourceFileId |Исходный файл |uniqueid | |
|===

*Секция "Данные для переноса"*

* Идентификатор: 07119738-4108-4766-AF63-F80E04797FA4
* Псевдоним: TransferData
* Название: Данные для переноса
* Тип секции: coll

.Поля секции "Данные для переноса"
[cols="20%,20%,20%,20%,20%",options="header"]
|===
|Псевдоним |Название |Тип поля |Размер |Дополнительная информация
|Date |Дата |datetime | |
|NewStateId |Новое состояние карточки |uniqueid | |
|===

*Подчиненные секции*

*Секция "Файлы для переноса"*

* Идентификатор: C5ED1494-BF06-4E4C-825F-CDAB99E3B502
* Псевдоним: TransferFiles
* Название: Файлы для переноса
* Тип секции: coll

.Поля секции "Файлы для переноса"
[cols="20%,20%,20%,20%,20%",options="header"]
|===
|Псевдоним |Название |Тип поля |Размер |Дополнительная информация
|SignedFile |Подписанный файл |refid | |
|===
