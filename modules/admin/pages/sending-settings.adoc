= Настройка отправки электронных документов

Администратор может добавить новые виды (типы) карточек, из которых возможна отправка электронных документов, а также изменить текущие настройки отправки.

.Чтобы добавить настройки отправки нового вида карточек:
. Перейдите на страницу _Компоненты_ в _Справочнике настроек операторов ЮЗДО_.
. В секции _Отправка_ нажмите кнопку image:buttons/plus-green.png[Плюс].
+
Будет предложено выбрать вид или тип карточек, для которого добавляется настройка.
+
. Выберите вид/тип карточек и нажмите кнопку *ОК*.
+
В список настроек будет добавлена новая запись с пустыми полями _Имя класса компонента чтения_ и _Имя класса компонента изменения_, и выбранным типом/видом карточек в поле _Тип карточки_.
+
.Настройки отправки электронных документов
image::sending-settings.png[Настройки отправки электронных документов]
+
. Укажите компоненты чтения и изменения данных карточки.
.. В поле _Имя класса компонента чтения_ выберите файл DLL, предоставляющий функции чтения данных карточки выбранного типа/вида. +
Файл DLL должен содержать класс, реализующий программный интерфейс `IDocumentDataReader`.
+
Для неформализованных документов можно использовать стандартную реализацию компонента -- файл `DocsVision.Edi.Runtime.BackOffice.dll` (только для видов карточки _Документ_). Для формализованных документов потребуется собственная реализация.
+
* [[section]]При отправке неформализованных документов данные о контрагенте для отправки берутся из секции _Получатели -- контрагенты_, _Получатель -- организация контрагента_ -- поле в этой секции.
// * При отправке формализованных документов данные о контрагенте для отправки берутся из секции "Договор -- Организация контрагента"
+
.. В поле _Имя класса компонента изменения_ выберите файл DLL, предоставляющий функции изменения данных карточки выбранного типа/вида. +
Файл DLL должен содержать класс, реализующий программный интерфейс `IDocumentUpdater`.
+
Для неформализованных документов можно использовать стандартную реализацию компонента -- файл `DocsVision.Edi.Runtime.BackOffice.dll` (только для видов карточки _Документ_). Для формализованных документов потребуется собственная реализация.
+
[NOTE]
====
Инструкция по разработке компонентов чтения и изменения данных карточки приведена в руководстве разработчика "{of-em}".
====

[#restrict]
== Ограничение выбора организации

Выбор организаций в диалоге отправки документов можно ограничить с помощью скрипта (раньше можно было ограничить только выбор подразделения).

Чтобы ограничить выбор организации, используйте свойство:

 public OperatorsUnit FixedUnit { get; set; }

Свойство добавлено во все формы `Send*Form` и `SignAndSend*Form`.

Свойство можно установить перед инициализацией в нужную организацию требуемого оператора, тогда отправка будет строго от нее.
