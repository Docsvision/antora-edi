= Кнопки для работы с документами ЮЗДО в {wc}е

В web-разметках для работы с документами ЮЗДО используются кнопки, переданные в виде расширений.

.Кнопки в карточках документов вида "Исходящий УПД":
[cols=",,,",options="header"]
|===
|Название |Название ЭУ |Текст метки |События

|`ApproveRevocation`
|Кнопка (CustomButton)
|Подтвердить аннулирование
|При щелчке: `approveRevocation`

|`RejectRevocation`
|Кнопка (CustomButton)
|Отказать в аннулировании
|При щелчке: `rejectRevocation`

|`customPrintButton`
|Кнопка (CustomButton)
|Печать
|При щелчке: `printInvoiceUniversalTransferDocument`

|`signAndSend`
|Кнопка (CustomButton)
|Подписать
|При щелчке: `signAndSendOutgoing`

|`revoke`
|Кнопка (CustomButton)
|Аннулировать
|При щелчке: `revoke`
|===

.Кнопки в карточках документов вида "Входящий УПД":
[cols=",,,",options="header"]
|===
|Название |Название ЭУ |Текст метки |События

|`customPrintButton`
|Кнопка (CustomButton)
|Печать
|При щелчке: `printInvoiceUniversalTransferDocument`

|`ApproveRevocation`
|Кнопка (CustomButton)
|Подтвердить аннулирование
|При щелчке: `approveRevocation`

|`RejectRevocation`
|Кнопка (CustomButton)
|Отказать в аннулировании
|При щелчке: `rejectRevocation`

|`signAndSend`
|Кнопка (CustomButton)
|Подписать
|При щелчке: signAndSendInvoice

|`rejectAndSend`
|Кнопка (CustomButton)
|Отказать
|При щелчке: `rejectAndSendInvoice`

|`sendReceipt`
|Кнопка (CustomButton)
|Отправить извещение
|При щелчке: `receipt`

|`revoke`
|Кнопка (CustomButton)
|Аннулировать
|При щелчке: `revoke`
|===

[#visibility]
== Управление видимостью кнопок в зависимости от состояния обмена

Видимостью кнопок для работы с документами ЮЗДО в {wc}е можно управлять с помощью обработчиков событий.

.Обработчики для видимости кнопок:
* `edi_loadDocumentState` -- на событие перед открытием карточки.
* `edi_updateButtonsVisibility` -- на событие после открытия карточки.

Чтобы в карточке неформализованного и формализованного документа отображался статус обмена, добавьте в разметку ЭУ `_Метка_` с именем _ediStatus_. Чтобы добавить к нему заголовок, можно поместить его в ЭУ `_Контейнер строка_`, в котором необходимо задать метку. Заполнение выполняется тем же скриптом `edi_updateButtonsVisibility`.

.Статусы документов:
В документе отсутствует заполненный формализованный файл::
Если файл не прошел валидацию или его нет.

Документ не отправлен::
Файл добавлен, но нет связанных с ним сообщений.

Документ подписан отправителем::
Для входящего документа есть подпись контрагента, для исходящего -- есть подпись с нашей стороны, документ отправлен.

Документ подписан с обеих сторон::
Есть ответная подпись.
