:of: модуля
:wt: edi-server
:config: appsettings

= Установка и настройка

include::install-linux::partial$limitation.adoc[]

Пользователь, выполняющий установку {of-em}, должен обладать правами локального администратора и администратора {dv}.

[NOTE]
====
Администратор {dv} -- пользователь, включенный в группу безопасности *{dv-admins-serv}* в конфигурационном файле модуля {pl}.
====

WARNING: Перед установкой ознакомьтесь с разделом "xref:6.1@edi:ROOT:requirements.adoc[]".

[#quick]
== Краткая справка по установке

. <<server,Установите>> серверную часть модуля _{em}_ в ОС Linux согласно инструкции ниже.
. <<windows,Установите>> серверную часть модуля _{em}_ в ОС Windows.
. <<client,Установите>> клиентскую часть модуля _{em}_.
. <<web,Установите>> серверную и клиентскую части модуля _{wc}_ версии {wc-req-m4d} или выше.
. <<diadoc,Установите>> компоненты для поддержки с оператором Диадок.
. <<sbis,Установите>> компоненты для поддержки с оператором СБИС.
+
****
При установке не забудьте _Компоненты модуля интеграции с операторами ЭДО_. Компоненты модуля можно установить командой `sudo apt-get install docsvision-ext-edi-webc`.
****

[#server]
== Установка серверной части модуля на Linux

Серверная часть модуля _{em}_ устанавливается на компьютер с сервером {dv}, а также *на все компьютеры* с отдельной установкой СУБП (модуль _Управление процессами_), на которых обрабатываются БП данного сервера {dv}.

include::6.1@platform:admin:partial$install.adoc[]
+
. При установке `docsvision-edi-server` предлагается установить также:
+
* `docsvision-ext-edi-webc` -- если планируется работа через интерфейс {wc}а, <<web,установите>> данное расширение {wc} для работы с модулем {em}.
* `docsvision-edi-diadoc-server` -- дополнительный компонент модуля, <<diadoc,добавляющий>> поддержку работы с оператором Диадок.
* `docsvision-edi-sbis-server` -- дополнительный компонент модуля, <<sbis,добавляющий>> поддержку работы с оператором СБИС.
+
Дополнительные настройки выполнять не требуется.
+
. <<windows,Установите>> серверные компоненты модуля в ОС Windows.

[#windows]
== Установка серверной части модуля в Windows

. Запустите пакет установки `EDIIntegrationServer.msi`.
+
.Мастер установки серверной части модуля
image::install-server-hello.png[Мастер установки серверной части модуля]
+
. Примите условия лицензионного соглашения для продолжения установки. Нажмите *Далее*.
+
.Условия лицензионного соглашения
image::install-server-license.png[Условия лицензионного соглашения]
+
. Выберите компоненты, которые требуется установить.
+
.Выбор устанавливаемых компонентов
image::install-server-components.png[Выбор устанавливаемых компонентов]
+
WARNING: Обратите внимание, серверные компоненты коннектора к Диадок ставятся в рамках данного инсталлятора.
+
. В следующем окне нажмите *Установить* и дождитесь завершения установки модуля.
// . Выберите базы данных {dv}, в которые будет установлен модуль, и нажмите *OK*. В процессе загрузки также будет предложено перезагрузить сервисы {dv}. Согласитесь с перезагрузкой сервисов.
// +
// .Окно выбора БД {dv} для установки загружаемых компонентов модуля
// image::install-server-db.png[Окно выбора БД {dv} для установки загружаемых компонентов модуля]
// +
. Нажмите на кнопку *Готово*, чтобы закрыть мастер установки.
+
include::install-linux:ROOT:partial$restart-and-db.adoc[]
. Установите коннекторы согласно инструкции, подробнее см. <<connectors,ниже>>.

[#connectors]
== Установка коннекторов

.{dv} {em} поддерживает работу со следующими коннекторами:
* Коннектор к Диадок, руководство по установке см. в разделе "xref:diadoc:install.adoc[]"
* Коннектор к СБИС, руководство по установке см. в разделе "xref:sbis:install.adoc[]"
// * {txc}, руководство по установке см. в разделе "xref:taxcom:install.adoc[]"

[#client]
== Установка клиентской части модуля

Клиентская часть модуля должна быть установлена на компьютеры пользователей {dv}, работающих в {wincl}е. Если {wincl} установлен для всех пользователей, то клиентский компонент модуля также должен быть установлен для всех пользователей.

Клиентская часть будет автоматически установлена при запуске {wincl}а, а также может быть установлена вручную.

.Чтобы установить клиентскую часть модуля "{em}" вручную:
. Запустите пакет установки:
+
* `EDIIntegrationClient.msi`, чтобы установить модуль с областью установки _Для текущего пользователя_.
* `msiexec /i "EDIIntegrationClient.msi" ALLUSERS=1`, чтобы установить модуль с областью установки _Для всех пользователей_. Для данного варианта установки требуются административные права.
+
Будет открыт мастер установки.
+
.Мастер установки клиентской части "{of-em}"
image::install-client-hello.png[Мастер установки клиентской части "{of-em}"]
+
. Примите условия лицензионного соглашения для продолжения установки.
+
.Условия лицензионного соглашения
image::install-client-license.png[Условия лицензионного соглашения]
+
. Выберите компоненты, которые требуется установить.
+
.Выбор устанавливаемых компонентов
image::install-client-components.png[Выбор устанавливаемых компонентов]
+
WARNING: Обратите внимание, клиентские компоненты коннектора к Диадок ставятся в рамках данного инсталлятора.
+
. В следующем окне нажмите *Установить* и дождитесь завершения установки модуля.
. Нажмите на кнопку *Готово*, чтобы закрыть мастер установки.
// . Установите коннектор к оператору ЭДО, через которого будет осуществляться обмен электронными документами, прежде чем приступать к настройке _{em}_. Если планируется использовать xref:diadoc:install.adoc[Коннектор к Диадок], компоненты которого были установлены на предыдущих этапах, дополнительных действий не требуется.
. Обновите БД через {cns}, подробнее процесс описан в документации модуля {pl}, раздел "xref:6.1@platform:console:db-update.adoc[]".

[#web]
== Установка {wc}а

. Если планируется работа через интерфейс {wc}а, установите серверную и клиентскую части модуля {wc} версии {wc-req-m4d} согласно инструкции приведённой в документации модуля {wc}, раздел xref:6.1@winclient:admin:install.adoc[].
. Дополнительно на сервере Linux установите _Компоненты модуля интеграции с операторами ЭДО_ для {wc}а командой `sudo apt-get install docsvision-ext-edi-webc`.
. На машине с Windows установите _{dv} Расширение ЭДО для Web-клиента_, запустив инсталлятор `{dv} EDI extension for Web-client.msi`.
. После установки импортируйте решение _Интеграция с операторами ЭДО_ с web-разметками, из папки `C:\Program Files (x86)\Docsvision\WebClient\LayoutSolutions\EDISolution`. Импортировать решение можно через Панель управления {wc}ом или {kvr}.

Если {wc} установлен на отдельной машине, для работы с модулем {em} через web-интерфейс, на машину с {wc}ом потребуется установить серверные компоненты:

* Установите коннектор для обмена электронными документами, подробнее см. <<connectors,Установка коннекторов>>.
* <<server,{of-em}>>
* _{dv} Расширение ЭДО для Web-клиента_ командой `sudo apt-get install docsvision-ext-edi-webc`.

include::diadoc:install.adoc[tags=install]

include::sbis:install.adoc[tags=install]

[#uninstall]
== Удаление модуля

. Чтобы удалить модуль, выполните команду:
+
[subs=attributes]
 $ sudo apt-get purge docsvision-{wt}
